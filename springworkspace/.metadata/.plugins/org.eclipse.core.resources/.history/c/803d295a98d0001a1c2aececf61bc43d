<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<style>
	#mycontainer {
		width: 90%;
		margin: 20px; auto;
	}

</style>

<script type="text/javascript">

	$(document).ready(function(){
		

		// 검색 버튼 클릭시 
		$("#btnSearch").click(function(){
			var arrDeptId = new Array();

			$("input:checkbox[name=deptId]").each(function(){
				var isChecked = $(this).is(":checked");
				
				if(isChecked) {
					arrDeptId.push($(this).val());
				}
			});
			
			var sDeptIds = arrDeptId.join();
		//	console.log(sDeptIds);
		
			var frm = document.searchFrm;
			frm.sDeptIds.value = sDeptIds;
			
			frm.method = "GET";
			frm.action = "empList.action";
			frm.submit();
			
		});
			
		
	});

</script>


<div id="mycontainer" align="center">
	  <form name="searchFrm">
	      <c:if test="${not empty deptIdList}">
		      <c:forEach var="deptId" items="${deptIdList}" varStatus="status">
		            <label for="${status.index}">
		            	<c:if test="${deptId == -999}">부서없음</c:if>
		            	<c:if test="${deptId != -999}">${deptId}</c:if>
		            </label>&nbsp;<input type="checkbox" id="${status.index}" name="deptId" value="${deptId}" />&nbsp;&nbsp; 
		      </c:forEach>
		  </c:if>
		  <input type="hidden" name="sDeptIds" />
		  <br/>
		  <button type="button" id="btnSearch">검색</button>
	  </form>
	  
	  <br/>
	  
	  <table>
	  	<thead>
	  		<tr>
		  		<th>부서번호</th>
				<th>부서명</th>
				<th>사원번호</th>
				<th>사원명</th>
				<th>입사일자</th>
				<th>월급</th>
				<th>성별</th>
				<th>나이</th>
			</tr>
		</thead>
		<tbody>
			<c:if test="${not emplty empList}">
				<c:forEach var="map" items="${empList}">
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
				</c:forEach>
			</c:if>
		</tbody>
		
		
		
	  </table>
	  
</div>